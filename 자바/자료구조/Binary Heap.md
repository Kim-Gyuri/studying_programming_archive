# ğŸ“ŒBinary Heap
+ Heap
+ Binary Heap
+ Heapify êµ¬í˜„í•˜ê¸°

## Heap
í™(heap)ì€ ìµœëŒ“ê°’ ë° ìµœì†Ÿê°’ì„ ì°¾ì•„ë‚´ëŠ” ì—°ì‚°ì„ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ <br>
ê³ ì•ˆëœ ì™„ì „ì´ì§„íŠ¸ë¦¬(complete binary tree)ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•œ ìë£Œêµ¬ì¡°ì´ë‹¤.

> `complete binary tree` <br>
> ëª¨ë“  ë…¸ë“œë“¤ì´ ë ˆë²¨ë³„ë¡œ ì™¼ìª½ë¶€í„° ì±„ì›Œì§€ë©´ ëœë‹¤. <br>
> ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ì œì™¸í•œ sub Treeì˜ ë ˆë²¨ì´ ê°™ì•„ì•¼ í•œë‹¤. <br>
> ë§ˆì§€ë§‰ ë…¸ë“œëŠ” ì™¼ìª½ë¶€í„° ì±„ì›Œì ¸ì•¼ í•œë‹¤. <br>

<br>

Heap ì¢…ë¥˜ë¡œ Max-Heap, Min-Heapì´ ìˆë‹¤.<br>
+ Min Heap : ìµœì†Œí™, ì‘ì€ ê°’ì„ í•­ìƒ ìœ„ì˜ ë…¸ë“œì— ë‘”ë‹¤.
+ Max Heap : ìµœëŒ€í™, ê°€ì¥ í° ê°’ì„ ë§¨ ìœ„ì— ë‘”ë‹¤.

## Binary Heap
![í™ê³¼ ì´ì§„íŠ¸ë¦¬](https://user-images.githubusercontent.com/57389368/223467579-739129c5-5a2f-4795-bafc-f4da1631a402.png) <br><br>

ê° ë…¸ë“œì˜ ìì‹ë…¸ë“œì˜ ìµœëŒ€ê°œìˆ˜ëŠ” í™ì˜ ì¢…ë¥˜ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ, <br>
ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ëŠ” ìì‹ë…¸ë“œì˜ ê°œìˆ˜ê°€ ìµœëŒ€ 2ê°œì¸ ì´ì§„ í™(binary heap)ì„ ì‚¬ìš©í•œë‹¤.


+ ë°°ì—´ë¡œ í‘œí˜„í•˜ê¸° ì¢‹ì€ êµ¬ì¡°
+ ë°°ì—´ì— íŠ¸ë¦¬ì˜ ê°’ë“¤ì„ ë„£ì–´ì¤„ ë•Œ, 1ë²ˆ ì¸ë±ìŠ¤ë¶€í„° ë£¨íŠ¸ë…¸ë“œê°€ ì‹œì‘ëœë‹¤. (ë…¸ë“œì˜ ê³ ìœ ë²ˆí˜¸ê°’ê³¼ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•¨)
+ Max Heapì—ì„œëŠ” Root node ì— ìˆëŠ” ê°’ì´ ì œì¼ í¬ë¯€ë¡œ,  ìµœëŒ€ê°’ì„ ì°¾ëŠ”ë° ì†Œìš”ë˜ëŠ” ì—°ì‚°ì˜ time complexity ì´ O(1)ì´ë‹¤. 
+ Min heap ì—ì„œëŠ” ìµœì†Œê°’ì„ ì°¾ëŠ”ë° ì†Œìš”ë˜ëŠ” ì—°ì‚°ì˜ time complexity ê°€ O(1)ì´ë‹¤.

## Heapify êµ¬í˜„í•˜ê¸°
ë°°ì—´(Array)ë¡œ í‘œí˜„ëœ ì´ì§„ íŠ¸ë¦¬(Binary tree)ì˜ ìë£Œêµ¬ì¡°ë¥¼ ê°–ëŠ” í™(Heap)ì„ ìƒì„±í•˜ëŠ” ê³¼ì •ì´ë‹¤.
>  Min Heap í˜¹ì€ Max Heap ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.
 
 <br>
 
 #### íŠ¹ì§•
+ ë§¨ ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ ë…¸ë“œë¡œ ëŒ€ì²´ì‹œí‚¨ í›„, ë‹¤ì‹œ heapify ê³¼ì •ì„ ê±°ì³ heap êµ¬ì¡°ë¥¼ ìœ ì§€í•œë‹¤. 
+ ì´ëŸ° ê²½ìš°ì—ëŠ” ê²°êµ­ O(log n)ì˜ ì‹œê°„ë³µì¡ë„ë¡œ ìµœëŒ€ê°’ ë˜ëŠ” ìµœì†Œê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

<br>

#### ë°°ì—´(arrays)ë¥¼ í†µí•´ì„œ ì„¤ê³„í•˜ëŠ” ë°©ë²•
```
1. ë°°ì—´ì˜ 0ë²ˆì§¸ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
2. ë¶€ëª¨ëŠ” arr[(i-1)/2]
3. ì™¼ìª½ ìì‹ë…¸ë“œëŠ” arr[2i+1]
4. ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œëŠ” arr[2i+2]
```

### Max-Heap Heapify êµ¬í˜„í•˜ê¸°
`1` build max-heap 
> ì¼ë°˜ ë°°ì—´ì„ í™ìœ¼ë¡œ êµ¬ì„±í•œë‹¤. <br>
> ê·¸ ê³¼ì •ì—ì„œ ìì‹ë…¸ë“œë¡œë¶€í„° ë¶€ëª¨ ë…¸ë“œë¥¼ ë¹„êµí•œë‹¤. <br>
> n/2-1ë¶€í„° 0ê¹Œì§€ ì¸ë±ìŠ¤ë¥¼ ëˆë‹¤. <br>


 `2` extreact-max
> ë£¨íŠ¸ë…¸ë“œë¥¼ ì œê±°í•˜ê³  ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ë¡œ ì˜®ê¸´ë‹¤.

 `3` ë‹¤ì‹œ 1~2 ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.
 
  <br><br>
  
 > ì˜ˆì‹œ
 ```
ì •ë ¬í•  ìš”ì†Œ
3 7 5 4 2 8 

ì •ë ¬ í›„
8 7 5 4 2 3 
```

  <br><br>
 
 > ì½”ë“œ
 ```java
 package hackerrank;

class HeapSort {

    HeapSort(int[] a) {
        sort(a, a.length);
    }

    // í™ êµ¬ì¡°ë¡œ êµ¬ì„±í•œë‹¤. (Build Max-heap)
    private static void sort(int[] a, int size) {
        // ìì‹ì´ ì—†ëŠ” ê²½ìš° ë°”ë¡œ return í•´ì¤€ë‹¤.
        if (size < 2) return;

        // ë¶€ëª¨ ì¸ë±ìŠ¤ëŠ” ê°€ì¥ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤.
        int parentId = getParent(size-1);

        // max heap
        for (int i=parentId; i>=0; i--) {
            // ë¶€ëª¨ë…¸ë“œ(ì¸ë±ìŠ¤ i)ë¥¼ 1ì”© ì¤„ì´ë©´ì„œ heap ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ë„ë¡ ì¬êµ¬ì„±í•œë‹¤.
            heapify(a, i, size-1);
        }

        for (int i=size-1; i>0; i--) {
            swap(a, 0, i-1); // rootì¸ 0ë²ˆì§¸ ì¸ë±ìŠ¤ì™€ ië²ˆì§¸ ì¸ë±ìŠ¤ì˜ ê°’ì„
            heapify(a, 0, i-1);// 0~(i-1)ê¹Œì§€ì˜ ì„œë¸ŒíŠ¸ë¦¬ì— ëŒ€í•´ min heapì„ ë§Œì¡±í•˜ë„ë¡ ì¬êµ¬ì„±í•œë‹¤.
        }
    }

    //  swap : ë‘ ì¸ë±ìŠ¤ì˜ ì›ì†Œë¥¼ êµí™˜í•œë‹¤.
    private static void swap(int[] a, int index1, int index2) {
        int temp = a[index1];
        a[index1] = a[index2];
        a[index2] = temp;
    }

    // build max-heap
    private static void heapify(int[] a, int parentId, int lastId) {
        int leftChild_id;   // ì™¼ìª½ ìì‹ë…¸ë“œ
        int rightChild_id; //ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œ
        int largestId;    //  ê°€ì¥ í° ê°’

        // í˜„ì¬ ë¶€ëª¨ ì¸ë±ìŠ¤ì˜ ìì‹ë…¸ë“œ ì¸ë±ìŠ¤ê°€ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ë¥¼ ë„˜ì§€ ì•Šì„ ë•Œ ê¹Œì§€ ë°˜ë³µí•œë‹¤.
        while ((parentId*2)+1 <= lastId) {
            leftChild_id = (parentId*2)+1;
            rightChild_id = (parentId*2)+2;
            largestId = parentId; // í˜„ì¬ ë¶€ëª¨ ì¸ë±ìŠ¤ë¥¼ ê°€ì¥ í° ê°’ì„ ê°™ë„ë¡ í•œë‹¤.

            // ì™¼ìª½ ìì‹ë…¸ë“œì™€ ë¹„êµí•œë‹¤.
            // í˜„ì¬ ê°€ì¥ í° ì¸ë±ìŠ¤ë³´ë‹¤ ì™¼ìª½ ìì‹ë…¸ë“œê°€ í° ê²½ìš°
            if (a[leftChild_id] > a[largestId]) {
                largestId = leftChild_id; // ê°€ì¥ í° ì¸ë±ìŠ¤ë¥¼ ì™¼ìª½ ìì‹ë…¸ë“œë¡œ ë°”ê¾¼ë‹¤.
            }

            // ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œì™€ ë¹„êµ
            // í˜„ì¬ ê°€ì¥ í° ì¸ë±ìŠ¤ë³´ë‹¤ ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œì˜ ê°’ì´ ë” í° ê²½ìš°
           if (rightChild_id <= lastId && a[rightChild_id] > a[largestId]) {
                largestId = rightChild_id; // ê°€ì¥ í° ì¸ë±ìŠ¤ëŠ” ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œê°€ ëœë‹¤.
            }

          // ê°€ì¥ í° ì¸ë±ìŠ¤ì™€ ë¶€ëª¨ë…¸ë“œê°€ ê°™ì§€ ì•Šë‹¤ëŠ” ê²ƒ
          // ìœ„ ìì‹ë…¸ë“œ ë¹„êµ ê³¼ì •ì—ì„œ í˜„ì¬ ë¶€ëª¨ë…¸ë“œë³´ë‹¤ í° ë…¸ë“œê°€ ì¡´ì¬í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
          // ê·¸ëŸ´ ê²½ìš°, í•´ë‹¹ ìì‹ ë…¸ë“œì™€ ë¶€ëª¨ë…¸ë“œë¥¼ êµí™˜í•´ì£¼ê³ ,
            // êµí™˜ëœ ìì‹ë…¸ë“œë¥¼ ë¶€ëª¨ë…¸ë“œë¡œ ì‚¼ì€ ì„œë¸ŒíŠ¸ë¦¬ë¥¼ ê²€ì‚¬í•˜ë„ë¡ ì¬ê·€í˜¸ì¶œí•œë‹¤.
            if (largestId != parentId) {
                swap(a, parentId, largestId);
                parentId = largestId; // êµí™˜ì´ ëœ ìì‹ë…¸ë“œë¥¼ ë¶€ëª¨ ë…¸ë“œê°€ ë˜ë„ë¡ êµì²´í•œë‹¤.
            } else {
                return;
            }
        }
    }

    // ë¶€ëª¨ ë…¸ë“œë¥¼ êµ¬í•œë‹¤.
    private static int getParent(int child) {
        return (child-1)/2;
    }
}
public class Main {
    public static void main(String[] args) {

        System.out.println("ì •ë ¬í•  ìš”ì†Œ");
        int[] a = {3,7,5,4,2,8}; // size = 6;
        for (int i : a) {
            System.out.print(i+" ");
        }
        System.out.println();

        HeapSort sort = new HeapSort(a);
        System.out.println("ì •ë ¬ í›„");
        for (int i : a) {
            System.out.print(i +" ");
        }
    }

}
```

